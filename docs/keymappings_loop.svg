<svg aria-roledescription="flowchart-v2" viewBox="-8 -8 647.84765625 1195.203125" height="1195.203125" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="647.84765625" id="mermaid-1674399483430"><style>#mermaid-1674399483430{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1674399483430 .error-icon{fill:#552222;}#mermaid-1674399483430 .error-text{fill:#552222;stroke:#552222;}#mermaid-1674399483430 .edge-thickness-normal{stroke-width:2px;}#mermaid-1674399483430 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1674399483430 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1674399483430 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1674399483430 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1674399483430 .marker{fill:#333333;stroke:#333333;}#mermaid-1674399483430 .marker.cross{stroke:#333333;}#mermaid-1674399483430 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1674399483430 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1674399483430 .cluster-label text{fill:#333;}#mermaid-1674399483430 .cluster-label span{color:#333;}#mermaid-1674399483430 .label text,#mermaid-1674399483430 span{fill:#333;color:#333;}#mermaid-1674399483430 .node rect,#mermaid-1674399483430 .node circle,#mermaid-1674399483430 .node ellipse,#mermaid-1674399483430 .node polygon,#mermaid-1674399483430 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1674399483430 .node .label{text-align:center;}#mermaid-1674399483430 .node.clickable{cursor:pointer;}#mermaid-1674399483430 .arrowheadPath{fill:#333333;}#mermaid-1674399483430 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1674399483430 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1674399483430 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1674399483430 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1674399483430 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1674399483430 .cluster text{fill:#333;}#mermaid-1674399483430 .cluster span{color:#333;}#mermaid-1674399483430 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1674399483430 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1674399483430 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-on_press_hook" id="L-A-on_press_hook-0" d="M294.8828125,34L294.8828125,38.166666666666664C294.8828125,42.333333333333336,294.8828125,50.666666666666664,294.8828125,59C294.8828125,67.33333333333333,294.8828125,75.66666666666667,294.8828125,79.83333333333333L294.8828125,84"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-on_press_hook LE-B" id="L-on_press_hook-B-0" d="M294.8828125,118L294.8828125,122.16666666666667C294.8828125,126.33333333333333,294.8828125,134.66666666666666,294.8828125,143C294.8828125,151.33333333333334,294.8828125,159.66666666666666,294.8828125,163.83333333333334L294.8828125,168"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M294.8828125,202L294.8828125,206.16666666666666C294.8828125,210.33333333333334,294.8828125,218.66666666666666,294.9661458333333,227.08333333333334C295.0494791666667,235.5,295.2161458333333,244,295.2994791666667,248.25L295.3828125,252.5"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-Success" id="L-C-Success-0" d="M242.8927816562018,398.8849691562018L226.5994534635015,413.2999742968348C210.3061252708012,427.7149794374679,177.7194688854006,456.5449897187339,161.4261406927003,479.5433281927003C145.1328125,502.5416666666667,145.1328125,519.7083333333334,145.1328125,536.875C145.1328125,554.0416666666666,145.1328125,571.2083333333334,145.1328125,614.7356770833334C145.1328125,658.2630208333334,145.1328125,728.1510416666666,145.1328125,798.0390625C145.1328125,867.9270833333334,145.1328125,937.8151041666666,146.92096480582526,978.5091145833334C148.7091171116505,1019.203125,152.28542172330097,1030.703125,154.07357402912623,1036.453125L155.86172633495147,1042.203125"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-Send" id="L-C-Send-0" d="M343.18371342989445,403.57409907010555L355.7982768165787,417.2075825584213C368.41284020326293,430.84106604673707,393.64196697663147,458.10803302336853,406.25653036331573,477.49151651168427C418.87109375,496.875,418.87109375,508.375,418.87109375,514.125L418.87109375,519.875"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Send LE-Failure" id="L-Send-Failure-0" d="M418.87109375,553.875L418.87109375,559.625C418.87109375,565.375,418.87109375,576.875,418.9544270833333,588.4583333333334C419.0377604166667,600.0416666666666,419.2044270833333,611.7083333333334,419.2877604166667,617.5416666666666L419.37109375,623.375"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Success LE-Actionable" id="L-Success-Actionable-0" d="M141.00477851941747,1076.203125L134.19148209951456,1081.953125C127.37818567961165,1087.703125,113.75159283980582,1099.203125,106.9382964199029,1110.703125C100.125,1122.203125,100.125,1133.703125,100.125,1139.453125L100.125,1145.203125"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Success LE-NonActionable" id="L-Success-NonActionable-0" d="M181.29209648058253,1076.203125L188.10539290048544,1081.953125C194.91868932038835,1087.703125,208.5452821601942,1099.203125,215.3585785800971,1110.703125C222.171875,1122.203125,222.171875,1133.703125,222.171875,1139.453125L222.171875,1145.203125"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Failure LE-Success" id="L-Failure-Success-0" d="M351.1545445092993,905.4865757592993L340.15157354941607,922.5226672994162C329.14860258953286,939.5587588395329,307.1426606697664,973.6309419197664,282.2963379198347,996.4170334598833C257.4500151699029,1019.203125,229.7633115898058,1030.703125,215.91995979975727,1036.453125L202.07660800970874,1042.203125"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Failure LE-TotalFailure" id="L-Failure-TotalFailure-0" d="M435.3775876790188,957.6966310709812L436.1408282741823,966.0310467258176C436.90406886934585,974.3654623806542,438.4305500596729,991.0342936903271,439.19379065483645,1005.1187093451636C439.95703125,1019.203125,439.95703125,1030.703125,439.95703125,1036.453125L439.95703125,1042.203125"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(145.1328125, 588.375)" class="edgeLabel"><g transform="translate(-12.03125, -9.5)" class="label"><foreignObject height="19" width="24.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g transform="translate(418.87109375, 485.375)" class="edgeLabel"><g transform="translate(-10.140625, -9.5)" class="label"><foreignObject height="19" width="20.28125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g><g transform="translate(418.87109375, 588.375)" class="edgeLabel"><g transform="translate(-125.515625, -9.5)" class="label"><foreignObject height="19" width="251.03125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Match with 0 layer of keymappings</span></div></foreignObject></g></g><g transform="translate(100.125, 1110.703125)" class="edgeLabel"><g transform="translate(-12.03125, -9.5)" class="label"><foreignObject height="19" width="24.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g transform="translate(222.171875, 1110.703125)" class="edgeLabel"><g transform="translate(-10.140625, -9.5)" class="label"><foreignObject height="19" width="20.28125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g><g transform="translate(285.13671875, 1007.703125)" class="edgeLabel"><g transform="translate(-12.03125, -9.5)" class="label"><foreignObject height="19" width="24.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g transform="translate(439.95703125, 1007.703125)" class="edgeLabel"><g transform="translate(-10.140625, -9.5)" class="label"><foreignObject height="19" width="20.28125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(294.8828125, 17)" id="flowchart-A-36" class="node default default"><rect height="34" width="133.5" y="-17" x="-66.75" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-59.25, -9.5)" style="" class="label"><foreignObject height="19" width="118.5"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Key was pressed</span></div></foreignObject></g></g><g transform="translate(294.8828125, 101)" id="flowchart-on_press_hook-37" class="node default default"><rect height="34" width="125.015625" y="-17" x="-62.5078125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-55.0078125, -9.5)" style="" class="label"><foreignObject height="19" width="110.015625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">on_press_hook</span></div></foreignObject></g></g><g transform="translate(294.8828125, 185)" id="flowchart-B-38" class="node default default"><rect height="34" width="163.875" y="-17" x="-81.9375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-74.4375, -9.5)" style="" class="label"><foreignObject height="19" width="148.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">match_keymappings</span></div></foreignObject></g></g><g transform="translate(294.8828125, 351.4375)" id="flowchart-C-40" class="node default default"><polygon style="" transform="translate(-99.4375,99.4375)" class="label-container" points="99.4375,0 198.875,-99.4375 99.4375,-198.875 0,-99.4375"/><g transform="translate(-74.9375, -9.5)" style="" class="label"><foreignObject height="19" width="149.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Matched something?</span></div></foreignObject></g></g><g transform="translate(161.1484375, 1059.203125)" id="flowchart-Success-42" class="node default default"><rect height="34" width="322.296875" y="-17" x="-161.1484375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-153.6484375, -9.5)" style="" class="label"><foreignObject height="19" width="307.296875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">At least one matched mapping has action?</span></div></foreignObject></g></g><g transform="translate(418.87109375, 536.875)" id="flowchart-Send-44" class="node default default"><rect height="34" width="425.953125" y="-17" x="-212.9765625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-205.4765625, -9.5)" style="" class="label"><foreignObject height="19" width="410.953125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Send all keys except last (prelast should be just pressed)</span></div></foreignObject></g></g><g transform="translate(418.87109375, 798.0390625)" id="flowchart-Failure-45" class="node default default"><polygon style="" transform="translate(-175.1640625,175.1640625)" class="label-container" points="175.1640625,0 350.328125,-175.1640625 175.1640625,-350.328125 0,-175.1640625"/><g transform="translate(-150.6640625, -9.5)" style="" class="label"><foreignObject height="19" width="301.328125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Maybe last key is a start of new mapping?</span></div></foreignObject></g></g><g transform="translate(100.125, 1162.203125)" id="flowchart-Actionable-47" class="node default default"><rect height="34" width="101.734375" y="-17" x="-50.8671875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-43.3671875, -9.5)" style="" class="label"><foreignObject height="19" width="86.734375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Clear queue</span></div></foreignObject></g></g><g transform="translate(222.171875, 1162.203125)" id="flowchart-NonActionable-49" class="node default default"><rect height="34" width="42.359375" y="-17" x="-21.1796875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-13.6796875, -9.5)" style="" class="label"><foreignObject height="19" width="27.359375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">End</span></div></foreignObject></g></g><g transform="translate(439.95703125, 1059.203125)" id="flowchart-TotalFailure-53" class="node default default"><rect height="34" width="112.640625" y="-17" x="-56.3203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-48.8203125, -9.5)" style="" class="label"><foreignObject height="19" width="97.640625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Press last key</span></div></foreignObject></g></g></g></g></g></svg>